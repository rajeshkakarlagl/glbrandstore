(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{521:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return L}));var a,s=t(0),c=t.n(s),o=t(1),u=t(12),i=t.n(u),r=t(4),l=t.n(r),O=t(5),d=t.n(O),m=t(103),f=t(161),b=t(20),g=t(30),h=t(6),p=t.n(h),C=t(29),k={signOutMutation:Object(C.d)(a||(a=p()(["\n    mutation SignOutFromMenu {\n        revokeCustomerToken {\n            result\n        }\n    }\n"])))},S=t(508),w=t(453),j=t(126),I=t(32),A=t(449),N=function(e){var n=function(e){var n=e.onSignOut,t=e.showWishList,a=Object(s.useCallback)((function(){n()}),[n]),c=Object(I.useConfigContext)().pagePaths,o=[];return o.push({name:"Order History",id:"accountMenu.orderHistoryLink",url:c.orderHistory}),t&&o.push({name:"Favorites Lists",id:"accountMenu.favoritesListsLink",url:c.wishlist}),o.push({name:"Address Book",id:"accountMenu.addressBookLink",url:c.addressBook},{name:"Account Information",id:"accountMenu.accountInfoLink",url:c.accountDetails}),{handleSignOut:a,menuItems:o}}({onSignOut:e.onSignOut,showWishList:e.showWishList}),t=n.handleSignOut,a=n.menuItems,o=Object(b.default)(A.a,e.classes),u=a.map((function(e){return c.a.createElement("a",{className:o.link,key:e.name,href:e.url},c.a.createElement(j.a,{id:e.id,defaultMessage:e.name}))}));return c.a.createElement("div",{className:o.root},u,c.a.createElement("button",{className:o.signOut,onClick:t,type:"button"},c.a.createElement(j.a,{id:"accountMenu.signOutButtonText",defaultMessage:"Sign Out"})))},E=N;N.propTypes={classes:Object(o.shape)({link:o.string,signOut:o.string}),onSignOut:o.func};var v=t(504),M=t(450),T=c.a.forwardRef((function(e,n){var t=e.accountMenuIsOpen,a=e.setAccountMenuIsOpen,o=e.showWishList,u=function(e){var n=e.accountMenuIsOpen,t=e.setAccountMenuIsOpen,a=Object(b.default)(k,e.operations).signOutMutation,c=Object(s.useState)("SIGNIN"),o=l()(c,2),u=o[0],r=o[1],O=Object(s.useState)(""),h=l()(O,2),p=h[0],C=h[1],S=Object(m.f)(),w=Object(m.g)(),j=Object(f.a)(a),I=l()(j,1)[0],A=Object(g.b)(),N=l()(A,2),E=N[0].isSignedIn,v=N[1].signOut,M=Object(s.useCallback)(i()(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r("SIGNIN"),t(!1),e.next=4,v({revokeToken:I});case 4:S.go(0);case 5:case"end":return e.stop()}}),e)}))),[S,I,t,v]),T=Object(s.useCallback)((function(){r("FORGOT_PASSWORD")}),[]),L=Object(s.useCallback)((function(){r("SIGNIN")}),[]),_=Object(s.useCallback)((function(){r("CREATE_ACCOUNT")}),[]),U=Object(s.useCallback)((function(){r("ACCOUNT")}),[]);return Object(s.useEffect)((function(){t(!1)}),[w,t]),Object(s.useEffect)((function(){r(E?"ACCOUNT":"SIGNIN")}),[n,E]),{handleAccountCreation:U,handleCreateAccount:_,handleForgotPassword:T,handleCancel:L,handleSignOut:M,updateUsername:C,username:p,view:u}}({accountMenuIsOpen:t,setAccountMenuIsOpen:a}),r=u.view,O=u.username,h=u.handleAccountCreation,p=u.handleSignOut,C=u.handleForgotPassword,j=u.handleCancel,I=u.handleCreateAccount,A=u.updateUsername,N=Object(b.default)(M.a,e.classes),T=t?N.root_open:N.root,L=t?N.contents_open:N.contents,_=null;switch(r){case"ACCOUNT":_=c.a.createElement(E,{onSignOut:p,showWishList:o});break;case"FORGOT_PASSWORD":_=c.a.createElement(v.a,{initialValues:{email:O},onCancel:j});break;case"CREATE_ACCOUNT":_=c.a.createElement(S.a,{classes:{root:N.createAccount},initialValues:{email:O},isCancelButtonHidden:!1,onSubmit:h,onCancel:j});break;case"SIGNIN":default:_=c.a.createElement(w.a,{classes:{modal_active:N.loading},setDefaultUsername:A,showCreateAccount:I,showForgotPassword:C})}return c.a.createElement("aside",{className:T},c.a.createElement("div",{ref:n,className:L},t?_:null))})),L=T;T.propTypes={classes:Object(o.shape)({root:o.string,root_open:o.string,link:o.string,contents_open:o.string,contents:o.string})}}}]);